{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "../../../partials/errorSummary.njk" import errorSummary %}
{% extends "../../../partials/layout.njk" %}

{% set pageTitle = "Have any of these details changed since your last check-in?" %}
{% set mainClasses = "app-container govuk-body" %}

{% block beforeContent %}
{{ govukBackLink({
  text: "Back",
  href: "/submission/video/review"
}) }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

{{ errorSummary(validationErrors) }}

    <span class="govuk-caption-l">About you</span>

    {% set homeAddressChanges %}
    {{ govukTextarea({
      name: "homeAddressChanges",
      id: "homeAddressChanges",
      errorMessage: validationErrors | findError("homeAddressChanges"),
      label: {
        text: "Tell us how your home address changed"
      }
    }) }}
    {% endset -%}

    {% set employmentStatusChanges %}
    {{ govukTextarea({
      name: "employmentStatusChanges",
      id: "employmentStatusChanges",
      errorMessage: validationErrors | findError("employmentStatusChanges"),
      label: {
        text: "Tell us how your employment status changed"
      }
    }) }}
    {% endset -%}

    {% set supportNetworkChanges %}
    {{ govukTextarea({
      name: "supportNetworkChanges",
      id: "supportNetworkChanges",
      errorMessage: validationErrors | findError("supportNetworkChanges"),
      label: {
        text: "Tell us how your support system changed"
      }
    }) }}
    {% endset -%}

    {% set contactDetailsChanges %}
    {{ govukTextarea({
      name: "contactDetailsChanges",
      id: "contactDetailsChanges",
      errorMessage: validationErrors | findError("contactDetailsChanges"),
      label: {
        text: "Tell us how your contact details changed"
      }
    }) }}
    {% endset -%}

    <form method="POST">
      <input type="hidden" name="_csrf" value="{{ csrfToken }}">

    {{ govukCheckboxes({
    name: "circumstances",
    fieldset: {
    legend: {
    text: "Have any of these details changed since your last check-in?",
    isPageHeading: true,
    classes: "govuk-fieldset__legend--l"
    }
    },
    items: [
    {
      value: "homeAddress",
      text: "Home address",
      conditional: {
        html: homeAddressChanges
      }
    },
    {
      value: "employmentStatus",
      text: "Employment status",
      conditional: {
        html: employmentStatusChanges
      }
    },
    {
      value: "supportNetwork",
      text: "Support system (family, relationships, friends)",
      conditional: {
        html: supportNetworkChanges
      }
    },
    {
      value: "contactDetails",
      text: "Contact details",
      conditional: {
        html: contactDetailsChanges
      }
    },
    {
      divider: "or"
    },
    {
      value: "none",
      text: "None of my circumstances have changed",
      behaviour: "exclusive"
    }
  ]
    }) }}

    {{ govukButton({
      text: "Continue"
    }) }}

    </form>
  </div>
</div>


{% endblock %}
